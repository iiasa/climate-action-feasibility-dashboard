---
title: "Replication file for the paper: A multidimensional feasibility evaluation of low-carbon scenarios"
output:
html_document: default
always_allow_html: true
---
  
  ```{r setup, include=FALSE}
#knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(global.par = TRUE)
knitr::opts_chunk$set(warning = FALSE, message = FALSE) 
```

```{r functions, include=FALSE, MESSAGE=FALSE}
#one of the main functions used to compute the geometric mean

geom_mean<-function(x){exp(mean(log(x)))}
```


```{r packages, include=FALSE, MESSAGE=FALSE}
pkgs<-c("vroom", "tidyverse", "plotly", "RColorBrewer", "viridis", "hrbrthemes", "here", "ggridges", "ggsci", "stringr", "cowplot","scales", "skimr", "jtools", "countrycode", "ggpmisc", "reticulate")
#install.packages(pkgs) -> please uncomment it if you don't have the required packages installed

load<-lapply(pkgs, library, character.only=TRUE)
```



```{r data_input, include=FALSE, MESSAGE=FALSE}

#Data from the 1.5C scenario explorer
meta<-vroom(here("input", "meta.csv"))
marker_set<-vroom(here("input", "marker.csv"))
meta_policy<-vroom(here("input", "meta_policy.csv"))
baselines<-vroom(here("input", "baselines.csv"))

#assumptions about thresholds

thresholds<-vroom(here("input", "thresholds.csv"))


#Regional conversions for R5 for the empirical data that is used
region_con<-vroom(here("input", "region_conversion.csv"))

#Data on coal from Global Monitor: https://globalenergymonitor.org/projects/global-coal-plant-tracker/ 

coal_50_all<-vroom(here("input", "coal_50_all.csv"))

#Data from Adrijevic et al.(2019, 2020) and the Wittgenstein Center

governance_proj<-vroom(here("input", "governance.csv"))
gov_eff<-vroom(here("input", "gov_eff_projections.csv"))
GII<-vroom(here("input", "GII.csv"))
EPI<-vroom(here("input", "EPI.csv"))
gov_his<-vroom(here("input", "gov_historical.csv"))
age<-vroom(here("input", "age.csv"))
education<-vroom(here("input", "education.csv"))
fertility<-vroom(here("input", "fertility.csv"))
```

```{python}
#You can import the 1.5C dataset either by using a python package pyam (and the link through reticulate) or by loading it file (Release 2.0) from the scenario explorer and saving it in the input folder 

import pyam

df =pyam.read_iiasa(
    'IXSE_SR15',
    model='*',
    variable=["AR5 climate diagnostics|Temperature|Global Mean|MAGICC6|MED",
  "Emissions|CO2",
  "GDP|PPP",
  "Population",
  "Investment|Energy Supply", 
  "Investment|Energy Supply|Electricity",
  "Investment|Energy Supply|Electricity|Solar",
  "Investment|Energy Supply|Electricity|Wind",
  "Investment|Energy Supply|Electricity|Nuclear",
  "Investment|Energy Supply|Electricity|Transmission and Distribution",
  "Investment|Energy Supply|Electricity|Biomass|w/ CCS",
  "Investment|Energy Supply|Electricity|Coal|w/ CCS",
  "Capacity|Electricity|Coal",
  "Secondary Energy|Electricity|Coal",
  "Capacity|Electricity|Gas",
  "Capacity|Electricity|Wind",
  "Capacity|Electricity|Solar",
  "Capacity|Electricity|Biomass",
  "Primary Energy|Biomass",
  "Primary Energy|Solar",
  "Secondary Energy|Electricity|Wind",
  "Secondary Energy|Electricity|Gas",
  "Primary Energy|Oil",
  "Price|Primary Energy|Oil",
  "Price|Carbon",
  "Price|Secondary Energy|Electricity",
  "Secondary Energy|Electricity",
  "Secondary Energy|Electricity|Oil",
  "Secondary Energy|Electricity|Nuclear",
  "Secondary Energy|Electricity|Wind",
  "Secondary Energy|Electricity|Solar",
  "Secondary Energy|Electricity|Hydro",
  "Secondary Energy|Electricity|Biomass",
  "Secondary Energy|Electricity|Biomass|w/ CCS",
  "Secondary Energy|Electricity|Coal|w/ CCS",
  "Secondary Energy|Electricity|Gas|w/ CCS",
  "Secondary Energy|Electricity|Oil|w/ CCS",
  "Final Energy|Transportation",
  "Final Energy|Transportation|Electricity",
  "Final Energy|Transportation|Liquids|Biomass",
  "Land Cover",
  "Land Cover|Forest",
  "Land Cover|Cropland",
  "Land Cover|Pasture",
  "Carbon Sequestration|Land Use",
  "Final Energy",
  "Final Energy|Residential and Commercial",
  "Final Energy|Industry",
  "Food Demand",
  "Food Demand|Livestock",
  "Final Energy|Industry|Electricity",
  "Final Energy|Residential and Commercial|Electricity",
  "Price|Agriculture|Livestock|Index",
  "Price|Agriculture|Corn|Index",
  "Emissions|NOx"],
   region='World'
)

df.to_csv('input/full.csv')

```

```{r}
full<-as_tibble(py$df)

```



